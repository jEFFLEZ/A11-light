function fe(n,o){for(var s=0;s<o.length;s++){const l=o[s];if(typeof l!="string"&&!Array.isArray(l)){for(const p in l)if(p!=="default"&&!(p in n)){const m=Object.getOwnPropertyDescriptor(l,p);m&&Object.defineProperty(n,p,m.get?m:{enumerable:!0,get:()=>l[p]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var de={exports:{}};(function(n){var o=function(s){var l=Object.prototype,p=l.hasOwnProperty,m=Object.defineProperty||function(t,e,r){t[e]=r.value},g,v=typeof Symbol=="function"?Symbol:{},O=v.iterator||"@@iterator",W=v.asyncIterator||"@@asyncIterator",R=v.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch{d=function(e,r,i){return e[r]=i}}function y(t,e,r,i){var a=e&&e.prototype instanceof B?e:B,f=Object.create(a.prototype),w=new K(i||[]);return m(f,"_invoke",{value:V(t,r,w)}),f}s.wrap=y;function A(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(i){return{type:"throw",arg:i}}}var N="suspendedStart",I="suspendedYield",$="executing",L="completed",h={};function B(){}function C(){}function _(){}var F={};d(F,O,function(){return this});var Y=Object.getPrototypeOf,G=Y&&Y(Y(c([])));G&&G!==l&&p.call(G,O)&&(F=G);var T=_.prototype=B.prototype=Object.create(F);C.prototype=_,m(T,"constructor",{value:_,configurable:!0}),m(_,"constructor",{value:C,configurable:!0}),C.displayName=d(_,R,"GeneratorFunction");function j(t){["next","throw","return"].forEach(function(e){d(t,e,function(r){return this._invoke(e,r)})})}s.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===C||(e.displayName||e.name)==="GeneratorFunction":!1},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,d(t,R,"GeneratorFunction")),t.prototype=Object.create(T),t},s.awrap=function(t){return{__await:t}};function U(t,e){function r(f,w,S,b){var E=A(t[f],t,w);if(E.type==="throw")b(E.arg);else{var Q=E.arg,H=Q.value;return H&&typeof H=="object"&&p.call(H,"__await")?e.resolve(H.__await).then(function(P){r("next",P,S,b)},function(P){r("throw",P,S,b)}):e.resolve(H).then(function(P){Q.value=P,S(Q)},function(P){return r("throw",P,S,b)})}}var i;function a(f,w){function S(){return new e(function(b,E){r(f,w,b,E)})}return i=i?i.then(S,S):S()}m(this,"_invoke",{value:a})}j(U.prototype),d(U.prototype,W,function(){return this}),s.AsyncIterator=U,s.async=function(t,e,r,i,a){a===void 0&&(a=Promise);var f=new U(y(t,e,r,i),a);return s.isGeneratorFunction(e)?f:f.next().then(function(w){return w.done?w.value:f.next()})};function V(t,e,r){var i=N;return function(f,w){if(i===$)throw new Error("Generator is already running");if(i===L){if(f==="throw")throw w;return u()}for(r.method=f,r.arg=w;;){var S=r.delegate;if(S){var b=J(S,r);if(b){if(b===h)continue;return b}}if(r.method==="next")r.sent=r._sent=r.arg;else if(r.method==="throw"){if(i===N)throw i=L,r.arg;r.dispatchException(r.arg)}else r.method==="return"&&r.abrupt("return",r.arg);i=$;var E=A(t,e,r);if(E.type==="normal"){if(i=r.done?L:I,E.arg===h)continue;return{value:E.arg,done:r.done}}else E.type==="throw"&&(i=L,r.method="throw",r.arg=E.arg)}}}function J(t,e){var r=e.method,i=t.iterator[r];if(i===g)return e.delegate=null,r==="throw"&&t.iterator.return&&(e.method="return",e.arg=g,J(t,e),e.method==="throw")||r!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=A(i,t.iterator,e.arg);if(a.type==="throw")return e.method="throw",e.arg=a.arg,e.delegate=null,h;var f=a.arg;if(!f)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h;if(f.done)e[t.resultName]=f.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=g);else return f;return e.delegate=null,h}j(T),d(T,R,"Generator"),d(T,O,function(){return this}),d(T,"toString",function(){return"[object Generator]"});function Z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function K(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Z,this),this.reset(!0)}s.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function a(){for(;r.length;){var f=r.pop();if(f in e)return a.value=f,a.done=!1,a}return a.done=!0,a}};function c(t){if(t){var e=t[O];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var r=-1,i=function a(){for(;++r<t.length;)if(p.call(t,r))return a.value=t[r],a.done=!1,a;return a.value=g,a.done=!0,a};return i.next=i}}return{next:u}}s.values=c;function u(){return{value:g,done:!0}}return K.prototype={constructor:K,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(z),!t)for(var e in this)e.charAt(0)==="t"&&p.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(b,E){return f.type="throw",f.arg=t,e.next=b,E&&(e.method="next",e.arg=g),!!E}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],f=a.completion;if(a.tryLoc==="root")return r("end");if(a.tryLoc<=this.prev){var w=p.call(a,"catchLoc"),S=p.call(a,"finallyLoc");if(w&&S){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(w){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else if(S){if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&p.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&(t==="break"||t==="continue")&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var f=a?a.completion:{};return f.type=t,f.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(f)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),z(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if(i.type==="throw"){var a=i.arg;z(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:c(t),resultName:e,nextLoc:r},this.method==="next"&&(this.arg=g),h}},s}(n.exports);try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}})(de);var ee=(n,o)=>`${n}-${o}-${Math.random().toString(16).slice(3,8)}`;const he=ee;let re=0;var se=({id:n,action:o,payload:s={}})=>{let l=n;return typeof l>"u"&&(l=he("Job",re),re+=1),{id:l,action:o,payload:s}},D={};let te=!1;D.logging=te;D.setLogging=n=>{te=n};D.log=(...n)=>te?console.log.apply(void 0,n):null;const pe=se,{log:q}=D,ge=ee;let ne=0;var ve=()=>{const n=ge("Scheduler",ne),o={},s={};let l=[];ne+=1;const p=()=>l.length,m=()=>Object.keys(o).length,g=()=>{if(l.length!==0){const d=Object.keys(o);for(let y=0;y<d.length;y+=1)if(typeof s[d[y]]>"u"){l[0](o[d[y]]);break}}},v=(d,y)=>new Promise((A,N)=>{const I=pe({action:d,payload:y});l.push(async $=>{l.shift(),s[$.id]=I;try{A(await $[d].apply(void 0,[...y,I.id]))}catch(L){N(L)}finally{delete s[$.id],g()}}),q(`[${n}]: Add ${I.id} to JobQueue`),q(`[${n}]: JobQueue length=${l.length}`),g()});return{addWorker:d=>(o[d.id]=d,q(`[${n}]: Add ${d.id}`),q(`[${n}]: Number of workers=${m()}`),g(),d.id),addJob:async(d,...y)=>{if(m()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return v(d,y)},terminate:async()=>{Object.keys(o).forEach(async d=>{await o[d].terminate()}),l=[]},getQueueLen:p,getNumWorkers:m}};function ye(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var we=n=>{const o={};return typeof WorkerGlobalScope<"u"?o.type="webworker":typeof document=="object"?o.type="browser":typeof process=="object"&&typeof ye=="function"&&(o.type="node"),typeof n>"u"?o:o[n]};const me=we("type")==="browser",Le=me?n=>new URL(n,window.location.href).href:n=>n;var Se=n=>{const o={...n};return["corePath","workerPath","langPath"].forEach(s=>{n[s]&&(o[s]=Le(o[s]))}),o},ce={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Ee="6.0.1",be={version:Ee};var Oe={workerBlobURL:!0,logger:()=>{}};const ke=be.version,Ae=Oe;var _e={...Ae,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${ke}/dist/worker.min.js`},Te=({workerPath:n,workerBlobURL:o})=>{let s;if(Blob&&URL&&o){const l=new Blob([`importScripts("${n}");`],{type:"application/javascript"});s=new Worker(URL.createObjectURL(l))}else s=new Worker(n);return s},Re=n=>{n.terminate()},$e=(n,o)=>{n.onmessage=({data:s})=>{o(s)}},Ne=async(n,o)=>{n.postMessage(o)};const X=n=>new Promise((o,s)=>{const l=new FileReader;l.onload=()=>{o(l.result)},l.onerror=({target:{error:{code:p}}})=>{s(Error(`File could not be read! Code=${p}`))},l.readAsArrayBuffer(n)}),x=async n=>{let o=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?o=atob(n.split(",")[1]).split("").map(s=>s.charCodeAt(0)):o=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(o=await x(n.src)),n.tagName==="VIDEO"&&(o=await x(n.poster)),n.tagName==="CANVAS"&&await new Promise(s=>{n.toBlob(async l=>{o=await X(l),s()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const s=await n.convertToBlob();o=await X(s)}else(n instanceof File||n instanceof Blob)&&(o=await X(n));return new Uint8Array(o)};var Ie=x;const Pe=_e,Me=Te,Ce=Re,Ge=$e,je=Ne,Ue=Ie;var De={defaultOptions:Pe,spawnWorker:Me,terminateWorker:Ce,onMessage:Ge,send:je,loadImage:Ue};const We=Se,k=se,{log:oe}=D,Be=ee,M=ce,{defaultOptions:Fe,spawnWorker:Ye,terminateWorker:ze,onMessage:Ke,loadImage:ae,send:He}=De;let ie=0;var le=async(n="eng",o=M.LSTM_ONLY,s={},l={})=>{const p=Be("Worker",ie),{logger:m,errorHandler:g,...v}=We({...Fe,...s}),O={},W=typeof n=="string"?n.split("+"):n;let R=o,d=l;const y=[M.DEFAULT,M.LSTM_ONLY].includes(o)&&!v.legacyCore;let A,N;const I=new Promise((c,u)=>{N=c,A=u}),$=c=>{A(c.message)};let L=Ye(v);L.onerror=$,ie+=1;const h=({id:c,action:u,payload:t})=>new Promise((e,r)=>{oe(`[${p}]: Start ${c}, action=${u}`);const i=`${u}-${c}`;O[i]={resolve:e,reject:r},He(L,{workerId:p,jobId:c,action:u,payload:t})}),B=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),C=c=>h(k({id:c,action:"load",payload:{options:{lstmOnly:y,corePath:v.corePath,logging:v.logging}}})),_=(c,u,t)=>h(k({id:t,action:"FS",payload:{method:"writeFile",args:[c,u]}})),F=(c,u)=>h(k({id:u,action:"FS",payload:{method:"readFile",args:[c,{encoding:"utf8"}]}})),Y=(c,u)=>h(k({id:u,action:"FS",payload:{method:"unlink",args:[c]}})),G=(c,u,t)=>h(k({id:t,action:"FS",payload:{method:c,args:u}})),T=(c,u)=>h(k({id:u,action:"loadLanguage",payload:{langs:c,options:{langPath:v.langPath,dataPath:v.dataPath,cachePath:v.cachePath,cacheMethod:v.cacheMethod,gzip:v.gzip,lstmOnly:[M.DEFAULT,M.LSTM_ONLY].includes(R)&&!v.legacyLang}}})),j=(c,u,t,e)=>h(k({id:e,action:"initialize",payload:{langs:c,oem:u,config:t}})),U=(c="eng",u,t,e)=>{if(y&&[M.TESSERACT_ONLY,M.TESSERACT_LSTM_COMBINED].includes(u))throw Error("Legacy model requested but code missing.");const r=u||R;R=r;const i=t||d;d=i;const f=(typeof c=="string"?c.split("+"):c).filter(w=>!W.includes(w));return W.push(...f),f.length>0?T(f,e).then(()=>j(c,r,i,e)):j(c,r,i,e)},V=(c={},u)=>h(k({id:u,action:"setParameters",payload:{params:c}})),J=async(c,u={},t={text:!0},e)=>h(k({id:e,action:"recognize",payload:{image:await ae(c),options:u,output:t}})),Z=async(c,u)=>{if(y)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return h(k({id:u,action:"detect",payload:{image:await ae(c)}}))},z=async()=>(L!==null&&(ze(L),L=null),Promise.resolve());Ke(L,({workerId:c,jobId:u,status:t,action:e,data:r})=>{const i=`${e}-${u}`;if(t==="resolve")oe(`[${c}]: Complete ${u}`),O[i].resolve({jobId:u,data:r}),delete O[i];else if(t==="reject")if(O[i].reject(r),delete O[i],e==="load"&&A(r),g)g(r);else throw Error(r);else t==="progress"&&m({...r,userJobId:u})});const K={id:p,worker:L,load:B,writeText:_,readText:F,removeFile:Y,FS:G,reinitialize:U,setParameters:V,recognize:J,detect:Z,terminate:z};return C().then(()=>T(n)).then(()=>j(n,o,l)).then(()=>N(K)).catch(()=>{}),I};const ue=le,Je=async(n,o,s)=>{const l=await ue(o,1,s);return l.recognize(n).finally(async()=>{await l.terminate()})},qe=async(n,o)=>{const s=await ue("osd",0,o);return s.detect(n).finally(async()=>{await s.terminate()})};var Ve={recognize:Je,detect:qe},Ze={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Qe={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Xe=ve,xe=le,et=Ve,tt=Ze,rt=ce,nt=Qe,{setLogging:ot}=D;var at={languages:tt,OEM:rt,PSM:nt,createScheduler:Xe,createWorker:xe,setLogging:ot,...et};const it=fe({__proto__:null},[at]);export{it as i};
